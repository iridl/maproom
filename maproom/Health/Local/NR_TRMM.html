<INGRID>
SOURCES .NASA .GES-DAAC .TRMM_L3 .TRMM_3B42 .v6 .daily .precipitation
 X -20 55 RANGE
 Y -15 40 RANGE
mimeheader
pop
</INGRID>
<html>
<head><title>TRMM local precipitation</title>
<link REL=stylesheet TYPE="text/css" HREF="/site.html">
</head>
<body bgcolor="#ffffff" link="#993333" vlink="#993333" alink="#FF0000">
<INGRID>leftmenu</INGRID>
<form action=NR_RFEv2.html>

<INGRID>
saveLanguage

/onebox {2 index 1 index {.name cvx exec first pointwidth 2 copy sub 3 1 roll add 3 -1 roll pop}forall counttoobject 1 add -1 roll pop {mystream mygrids xlo xhi ylo yhi}inputs mystream mygrids 0 get xlo xhi RANGE
dup 0 replaceNaN exch
 mygrids 1 get ylo yhi RANGE mygrids 0 get xlo xhi definite-integral mygrids 1 get ylo yhi definite-integral 
exch dataflag
 mygrids 1 get ylo yhi RANGE mygrids 0 get xlo xhi definite-integral mygrids 1 get ylo yhi definite-integral 
.5	normalize
1output}def

/onebox {2 index 1 index {.name cvx exec first pointwidth 2 copy sub 3 1 roll add 3 -1 roll pop}forall counttoobject 1 add -1 roll pop {mystream mygrids xlo xhi ylo yhi}inputs mystream 
mygrids 0 get xlo xhi add 2. div VALUE
 mygrids 1 get ylo yhi add 2. div VALUE
1output}def

SOURCES .NASA .GES-DAAC .TRMM_L3 .TRMM_3B42 .v6 .daily .precipitation
 X -20 55 RANGE
 Y -15 40 RANGE

/avgbyentity null 4 object def

avgbyentity /Country
 {
IRIDB
(select gid,the_geom,cntry_name as name1,centroid(the_geom) as center,distance(centroid(the_geom),GeometryFromText( 'POINT(YYYY)',4326 )) from esri2002_national where the_geom && GeometryFromText( 'POINT(XXXX)',4326 ) ORDER BY distance(centroid(the_geom),GeometryFromText( 'POINT(YYYY)',4326 )) LIMIT 1)

(XXXX) rsearch pop nip
 X WWWinfo .FORMinfo .map .X .plotvalue readunits  s== nip
( )
 Y WWWinfo .FORMinfo .map .Y .plotvalue readunits  s== nip
3array astore concat
exch
3array astore concat
2 {
(YYYY) rsearch pop nip
 X WWWinfo .FORMinfo .map .X .plotvalue readunits  s== nip
( )
 Y WWWinfo .FORMinfo .map .Y .plotvalue readunits  s== nip
3array astore concat
exch
3array astore concat
} repeat
openquery
/gendistrictinfo WWWinfo !
pop
WWWinfo .gendistrictinfo .the_geom [X Y] weighted-average
  } put

avgbyentity /province
  {
  IRIDB
  (select feature_id,the_geom,country_na as name1,prov_na as name2,centroid(the_geom) as center,distance(centroid(the_geom),GeometryFromText( 'POINT(YYYY)',4326 )) from mews_prov where the_geom && GeometryFromText( 'POINT(XXXX)',4326 ) ORDER BY distance(centroid(the_geom),GeometryFromText( 'POINT(YYYY)',4326 )) LIMIT 1)

  (XXXX) rsearch pop nip
   X WWWinfo .FORMinfo .map .X .plotvalue readunits  s== nip
  ( )
   Y WWWinfo .FORMinfo .map .Y .plotvalue readunits  s== nip
  3array astore concat
  exch
  3array astore concat
  2 {
  (YYYY) rsearch pop nip
   X WWWinfo .FORMinfo .map .X .plotvalue readunits  s== nip
  ( )
   Y WWWinfo .FORMinfo .map .Y .plotvalue readunits  s== nip
  3array astore concat
  exch
  3array astore concat
  } repeat
  openquery
  /gendistrictinfo WWWinfo !
  pop
  WWWinfo .gendistrictinfo .the_geom [X Y] weighted-average
  } put

avgbyentity /district
  {

%{
%dup (district) eq
%{
IRIDB
(select gid,the_geom,country_na as name1,prov_na as name2,dist_na as name3,centroid(the_geom) as center,distance(centroid(the_geom),GeometryFromText( 'POINT(YYYY)',4326 )) from mews_dist where the_geom  &&  GeometryFromText('POINT(XXXX)',4326 ) ORDER BY distance(centroid(the_geom),GeometryFromText( 'POINT(YYYY)',4326 )) LIMIT 1)
(XXXX) rsearch pop nip
 X WWWinfo .FORMinfo .map .X .plotvalue readunits  s== nip
( )
 Y WWWinfo .FORMinfo .map .Y .plotvalue readunits  s== nip
3array astore concat
exch
3array astore concat
2 {
(YYYY) rsearch pop nip
 X WWWinfo .FORMinfo .map .X .plotvalue readunits  s== nip
( )
 Y WWWinfo .FORMinfo .map .Y .plotvalue readunits  s== nip
3array astore concat
exch
3array astore concat
} repeat
openquery
/gendistrictinfo WWWinfo !
pop
WWWinfo .gendistrictinfo .the_geom [X Y] weighted-average
} put

WWWinfo .FORMinfo .map .Y /step getknown

{ % +

 avgbyentity 1 index getknown

 { % -
   exec
 } % -.

 { % *
   interp
   dup
   Y .step gt
   {
   exch
     Y 2 index splitstreamgrid
     X 2 index splitstreamgrid
     [X Y]0.5 average
     X2 /X renameGRID
     Y2 /Y renameGRID
    nip
   }
   {pop
   } ifelse
   Y /step WWWinfo .FORMinfo .map .Y .step interp def pop
 } ifelse % *.

} % +.

{
Y .step /step WWWinfo .FORMinfo .map .Y !
}
ifelse

dup /Y known {Y /step step def pop
X WWWinfo .FORMinfo .map .X .plotvalue VALUE
Y WWWinfo .FORMinfo .map .Y .plotvalue VALUE
} if

 home .grover .EMILY .Analyses .RFEv2Avg .avg

WWWinfo .FORMinfo .map .Y .step (Country) eq
WWWinfo .FORMinfo .map .Y .step (province) eq or
WWWinfo .FORMinfo .map .Y .step (district) eq or

{
X -20 55 RANGE
Y -15 40 RANGE
WWWinfo .gendistrictinfo .the_geom [X Y] weighted-average
}
{[X Y] onebox} ifelse

exch  
</INGRID>

<table align=right><tr><td><a href="http://iri.columbia.edu/~grover/Malaria/mewsnotice.html">Notice of Changes<br>to Analyses Below</a></td></tr></table>

<center><table width="580"><tbody><tr valign="top"><td align="left">

<table cellpadding="4" cellspacing="4" bgcolor="#ffffff"><tbody><tr bgcolor="#f0f0f0"><td>
<INGRID>
SOURCES .WORLDBATH .bath

WWWinfo .FORMinfo .map .Y .step (Country) eq
WWWinfo .FORMinfo .map .Y .step (province) eq or
WWWinfo .FORMinfo .map .Y .step (district) eq or

{WWWinfo .gendistrictinfo a: .the_geom :a: .center :a
X Y fig: lightgrey mask grey mews_prov black countries_gaz red fill  red geometrysmallpushpins :fig
}
{
1 index a: .X first pointwidth .5 mul sub nip
:a: .Y first pointwidth .5 mul sub nip
 :a: .X first pointwidth .5 mul add nip
:a: .Y first pointwidth .5 mul add nip :a
georect
2 index a: .X .first :a: .Y .first :a
togeopoint
a: .lon :a: .lat :a
X Y fig: lightgrey mask grey mews_prov black countries_gaz red fill  red smallpushpins :fig
} ifelse

 /plotaxislength 120 psdef /plotborder 0 psdef
/plotbordertop 8 psdef
/plotborderright 8 psdef
/plotborderleft 8 psdef
/plotborderbottom 8 psdef
/antialias true psdef
/map imagelink
</INGRID></td><td align="left">
<font face="Helvetical,Arial" point-size=10pt size=-1>
Observations for:<br> 

<b><INGRID>

WWWinfo .FORMinfo .map .Y .step (Country) eq

{
  WWWinfo .gendistrictinfo

  [ name1 ] {reserverealization} forall

  ()
  [
  name1 getrealization
  ] { dup (N.A.) eq {pop}{exch print print (, )}ifelse} forall
  pop
  pop
}
{

 WWWinfo .FORMinfo .map .Y .step (province) eq

 {
   WWWinfo .gendistrictinfo

   [ name1 name2 ] {reserverealization} forall

   ()
   [
   name2 getrealization
   name1 getrealization
   ] { dup (N.A.) eq {pop}{exch print print (, )}ifelse} forall
   pop
   pop
 }
 {

  WWWinfo .FORMinfo .map .Y .step (district) eq

  {
    WWWinfo .gendistrictinfo
    [ name1 name2 name3 ] {reserverealization} forall
    ()
    [
    name3 getrealization
    name2 getrealization
    name1 getrealization
    ] { dup (N.A.) eq {pop}{exch print print (, )}ifelse} forall
    pop
    pop
  }
  {
   X first printunits pop
   (, ) print
   Y first printunits pop
   (<br> ~ )print
   Y .step
   10000 90. div mul floor cvi dup ==ns (x) print ==ns ( km) print
  } ifelse
 } ifelse
} ifelse

</INGRID></b></font>
</td>
<INGRID>
showmenu? {
(<td bgcolor=white cellpadding=12>)print
(map.Y.step) WWWinfo .FORMinfo .map .Y .step 

%dup (district) ne {interp} if startselect

 dup (province) eq
 {
 }
 {
  dup (district) eq
  {
  }
  {
   dup (Country) eq
   {
   }
   {interp
   } ifelse
  } ifelse
 } ifelse
startselect
.1 (11km) valueoption
.3 (33km) valueoption
.5 (55km) valueoption
1. (111km) valueoption
(Country) (Country) valueoption
(province) (Province) valueoption
(district) (District) valueoption

endselect
(<input name="map.X.plotvalue" size=8 value=")print
WWWinfo .FORMinfo .map .X .plotvalue print(">\n) print
(<input name="map.Y.plotvalue" size=8 value=")print WWWinfo .FORMinfo .map .Y .plotvalue print(">\n)print
(<input type="hidden" name="map.X.units" value=")print WWWinfo .FORMinfo .map .X .units print(">\n)print
(<input type="hidden" name="map.Y.units" value=")print WWWinfo .FORMinfo .map .Y .units print(">\n)print
(<input type="hidden" name="map.X.plotfirst" value=")print WWWinfo .FORMinfo .map .X .plotfirst print(">\n)print
(<input type="hidden" name="map.Y.plotfirst" value=")print WWWinfo .FORMinfo .map .Y .plotfirst print(">\n)print
(<input type="hidden" name="map.X.plotlast" value=")print WWWinfo .FORMinfo .map .X .plotlast print(">\n)print
(<input type="hidden" name="map.Y.plotlast" value=")print WWWinfo .FORMinfo .map .Y .plotlast print(">\n)print
(<input type=submit value="Generate new time series">) print
(</td>)print
} if
</INGRID>
</tr></tbody></table>
<table border cellpadding="6" cellspacing="4" bgcolor="#ffffff"><tbody><tr valign="top"><td width="50%"  bgcolor=#F0F8FF>
<font face="Helvetical,Arial" point-size=9pt size=-1>
<b>a) </b><br>
</font>

<center>
<a href="/<INGRID> dup dataseturl</INGRID>/DATA/0/50/RANGE%5BT%5DREORDER/dup/0/mul/T/fig:/deltabars/:fig/figviewer.html?my.help=more+options&map.est_prcp.units=mm&map.est_prcp.plotlast=50&map.url=&map.domain=+%7B+/est_prcp+0+50+plotrange+/est_prcp+0+50+plotrange+T+14579.+last+plotrange+%7D&map.domainparam=+/plotaxislength+250+psdef+/plotborder+72+psdef+/XOVY+null+psdef&map.zoom=Zoom&map.est_prcp.plotfirst=0&map.T.plotfirst=1+Dec+1999&map.T.units=days+since+1960-01-01&map.T.plotlast=&map.plotaxislength=432&map.plotborder=72&map.fnt=Helvetica&map.fntsze=12&map.XOVY=auto&map.color_smoothing=1&map.iftime=25&map.mftime=25&map.fftime=200" OnMouseOver="self.status='Click here to explore the data';return true">
<img src="/<INGRID> dup dataseturl</INGRID>/DATA/0/50/RANGE/toNaN/%5BT%5DREORDER/dup/0/mul/T/fig:/deltabars/:fig/+//est_prcp/0/50/plotrange/T/0.5/last/plotrange+//plotborder+72+psdef//plotbordertop+15+psdef//plotborderbottom+62+psdef//plotaxislength+250+psdef//XOVY+null+psdef+.gif" NOSAVE border=0 ALT="Multi-year precipitation time series" title="Multi-year precipitation time series" width=322 height=197</a>
</center>
<font size=-1><br><a href="/<INGRID> dup dataseturl</INGRID>/T+exch/2+ncoltable.html?tabopt.N=3&tabopt.1=text&tabopt.2=text&tabopt.3=markNaN&NaNmarker=NaN&tabtype=html">Data in this graph</a></font>

</td><td height="200" bgcolor="#F0F8FF" width="50%">
<font face="Helvetical,Arial" point-size=9pt size=-1>
<b>b) </b><br>
</font>
<center>
<a href="/<INGRID> dup dataseturl</INGRID>/T/2/copy//pointwidth/0/def/%286%20Jan%29VALUES/.T/.gridvalues/dup/length/4/sub/get/last/RANGE/T/name/npts/NewIntegerGRID//units/%28days%20since%202006-01-01%29def/replaceGRID/DATA/0/50/RANGE/dup/T/1/1095/RANGE/T/0/365/730/shiftdata/T//modulus/365/def/pop/exch/T/-1095/shiftGRID/T/1/last/RANGE/T//modulus/365/def/pop//fullname/%282011%29def/exch/a:/T_lag/730/VALUE/T_lag/removeGRID//fullname/%282010%29def/:a:/T_lag/365/VALUE/T_lag/removeGRID//fullname/%282008%29def/:a:/T_lag/0/VALUE/T_lag/removeGRID//fullname/%282009%29def/:a/T/fig:/medium/line/verythin/blue/solid/line/magenta/line/grey/line/:fig//plotaxislength/250/psdef/figviewer.html?my.help=&map.est_prcp.units=mm&map.est_prcp.plotlast=50&map.url=&map.domainparam=+/plotaxislength+250+psdef+/plotborder+72+psdef&map.zoom=Zoom&map.est_prcp.plotfirst=0&map.plotaxislength=432&map.plotborder=72&map.fnt=Helvetica&map.fntsze=12&map.color_smoothing=1&map.XOVY=auto&map.iftime=25&map.mftime=25&map.fftime=200" OnMouseOver="self.status='Click here to modify graph';return true">

<img src="/<INGRID> dup dataseturl</INGRID>/T/2/copy//pointwidth/0/def/%286%20Jan%29VALUES/.T/.gridvalues/dup/length/4/sub/get/last/RANGE/T/name/npts/NewIntegerGRID//units/%28days%20since%202006-01-01%29def/replaceGRID/DATA/0/50/RANGE/dup/T/1/1095/RANGE/T/0/365/730/shiftdata/T//modulus/365/def/pop/exch/T/-1095/shiftGRID/T/1/last/RANGE/T//modulus/365/def/pop//fullname/%282011%29def/exch/a:/T_lag/730/VALUE/T_lag/removeGRID//fullname/%282010%29def/:a:/T_lag/365/VALUE/T_lag/removeGRID//fullname/%282008%29def/:a:/T_lag/0/VALUE/T_lag/removeGRID//fullname/%282009%29def/:a/T/fig:/medium/line/verythin/blue/solid/line/magenta/line/grey/line/:fig//plotaxislength/250/psdef/+//est_prcp/0/250/plotrange//est_prcp/0/250/plotrange//est_prcp/0/250/plotrange//est_prcp/0/250/plotrange/T/0.5/365.5/plotrange+//plotborder+72+psdef//plotbordertop+15+psdef//plotborderbottom+62+psdef//plotaxislength+250+psdef//XOVY+null+psdef+.gif" NOSAVE border=0 ALT="Multi-year precipitation comparison" title="Multi-year precipitation comparison" width=322 height=197></a>

</center>


</td><td bgcolor="#F0F8FF" width="50%">
<font face="Helvetical,Arial" point-size=9pt size=-1>
</td></tr><tr valign="top"><td colspan="2" bgcolor="#F0F8FF">
<font face="Helvetical,Arial" point-size=12pt size=-1>
<b><u>Description</u></b>
</font>
<font face="Helvetical,Arial" point-size=9pt size=-1>
<br>
Daily precipitation estimates for the selected region from Jan 1998 to the present.  
<p>
<font face="Helvetical,Arial" point-size=12pt size=-1>
<b><u>Data Sources</u></b>
<br></font>
<font face="Helvetical,Arial" point-size=9pt size=-1>
<b>Rainfall Estimates</b><br>
<font size=-1><b>Data</b>:&nbsp;&nbsp;Daily Surface Rain from all Satellite and Surface from NASA GES-DAAC TRMM_L3 TRMM_3B42 v6 on a 0.25 x 0.25 deg. lat/lon grid</font>
<br><font size=-1><b>Data Source</b>:&nbsp; NASA GES-DAAC
(<a href="http://disc.sci.gsfc.nasa.gov/precipitation/documentation/TRMM_README/TRMM_3B42_readme.shtml">TRMM Product 3B42 (V6)</a>)* </font>

</td></tr></tbody></table>
</td></tr></tbody></table>
</center></body></html>






