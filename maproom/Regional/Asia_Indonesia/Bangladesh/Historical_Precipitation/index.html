<INGRID>
home .remic
mimeheader
pop
</INGRID>

<html><head>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
    <title>Bangladesh Climate Monitoring - Historical</title>
    <STYLE TYPE="text/css">
    <!--
    P.indented
       {
       padding-left: 25pt;
       padding-right: 25pt;
       text-align: justify;
       }
    -->
    </STYLE>

<script type="text/javascript">
<!--

//-->
</script>

<INGRID>
mappageLinks
figdefs
</INGRID>

</head>
<body bgcolor="#FFFFFF"  link="#993333" vlink="#993333" alink="#FF0000" onLoad='initdrag();document.mapform.reset();' onunload="window.setTimeout('resetdrag',5000);">

<INGRID>
/leftmenusub? { leftmenulevel 0 get 2 le } def
leftmenuHeader
</INGRID>

<FORM name=mapform action=index.html>
<INGRID>saveLanguage</INGRID>
<table width=100% align="center">
<tr>
<td align=left>
<img src="http://iridl.ldeo.columbia.edu/expert/SOURCES/.WORLDBATH/.bath/X/65/110/RANGEEDGES/Y/0/40/RANGEEDGES/0/mul/1/add/SOURCES/.Features/.Political/.World/.Countries/.the_geom/dup/objectid/%28138%29VALUES/X/Y/fig:/blue/mask/lightgrey/fill/red/fill/black/verythin/coasts_gaz/countries_gaz/:fig//plotborder/0/psdef//plotaxislength/75/psdef//XOVY/null/psdef/X/64.95834/110.0417/plotrange/Y/-0.04166667/40.04167/plotrange/+//antialias+true+psdef//plotborder+0+psdef//plotaxislength+75+psdef//XOVY+null+psdef+.jpg">
</td>
<td><h3 align=center><u>Bangladesh Climate Monitoring - Historical</u></h3></td>
<td align=right>
</td>
</tr>
</table>

<center>
<table border=0 width=90%>
<tr valign=top>
<td align=left>
<table bgcolor="#F5F5F5" bordercolor=#808080>
<tr><td>

<table BORDER COLS=1 width=430 bordercolor=#808080>
<tr>
<td width=300 bgcolor=#DCDCDC>
<b><font point-size=12pt>Span Years from 

<INGRID>
%Defining an input menu to choose the first year in the range of year spanned
(<input name=firstyearspan onkeypress="changedtext(this)" type=text id=year value=) print
/firstyearspan FORMgetknown {
  print
}{
  SOURCES .RIHN .aphrodite .V1003R1 .APHRO_MA_025deg .T
  first cvsunits
   interp nip nip nip s==
  dup print /firstyearspan FORM!
}ifelse
( size=4 maxlength=4/>) print
</INGRID>

      to 

<INGRID>
%Defining an input menu to choose the last year in the range of year spanned
(<input name=lastyearspan onkeypress="changedtext(this)" type=text id=endyear value=) print
/lastyearspan FORMgetknown {
  print
}{
  SOURCES .RIHN .aphrodite .V1003R1 .APHRO_MA_025deg .T
  last cvsunits
   interp nip nip nip s==
  dup print /lastyearspan FORM!
}ifelse
( size="4" maxlength="4"/>) print
</INGRID>

</font></b>
</td></tr>

<tr>
<td width=300 bgcolor=#DCDCDC>
<b><font point-size=12pt>Define Season... <br> from

<INGRID>
%Defining a select menu to choose the first month of the season
(<select name=jumpMenu id=jumpMenu onChange="changedtext(this)">) print
[(January) (February) (March) (April) (May) (June) (July) (August) (September) (October) (November) (December)]
{
  (<option value=) print
  dup print /jumpMenu FORMgetknown {
    1 index eq {( selected=selected) print}if
  }{
    dup (January) eq {( selected=selected) print} if (January) /jumpMenu FORM!
  }ifelse
  (>) print print (</option>) print
} forall
(</select>) print
</INGRID>

<INGRID>
%Defining a select menu to choose the day of the month the season starts
(<select name=begday id=begday onChange="changedtext(this)">) print
[(1) (2) (3) (4) (5) (6) (7) (8) (9) (10) (11) (12) (13) (14) (15) (16) (17) (18) (19) (20) (21) (22) (23) (24) (25) (26) (27) (28) (29) (30) (31)]
{
  (<option value=) print
  dup print /begday FORMgetknown {
    1 index eq {( selected=selected) print}if
  }{
    dup (1) eq {( selected=selected) print} if (1) /begday FORM!
  }ifelse
  (>) print print (</option>) print
} forall
(</select>) print
</INGRID>

        to

<INGRID>
%Defining a select menu to choose the last month of the season
(<select name="jumpMenu2" id="jumpMenu2" onChange="changedtext(this)">) print
[(January) (February) (March) (April) (May) (June) (July) (August) (September) (October) (November) (December)]
{
  (<option value=) print
  dup print /jumpMenu2 FORMgetknown {
    1 index eq {( selected=selected) print}if
  }{
    dup (January) eq {( selected=selected) print} if (January) /jumpMenu2 FORM!
  }ifelse
  (>) print print (</option>) print
} forall
(</select>)print
</INGRID>

<INGRID>
%Defining a select menu to choose the day of the month the season ends
(<select name=endday id=endday onChange="changedtext(this)">) print
[(1) (2) (3) (4) (5) (6) (7) (8) (9) (10) (11) (12) (13) (14) (15) (16) (17) (18) (19) (20) (21) (22) (23) (24) (25) (26) (27) (28) (29) (30) (31)]
{
  (<option value=) print
  dup print /endday FORMgetknown {
    1 index eq {( selected=selected) print}if
  }{
    dup (31) eq {( selected=selected) print} if (31) /endday FORM!
  }ifelse
  (>) print print (</option>) print
} forall
(</select>) print
</INGRID>

</font></b>
</td></tr>

<tr>
<td align=center width=300 bgcolor=#DCDCDC>
<b><font point-size=12pt>Spatial Resolution and Quality Control</font></b>
</td></tr><tr><td>
<font point-size=10pt>
spatial resolution of the original dataset:
<INGRID>

/resolnames null 2 object
  /025 (0.25&#176;) def
  /050 (0.50&#176;) def
def

[(025) (050)] {
  (<input type=radio name=resolution onChange="changedtext(this)" value=) print
   dup print /resolution FORMgetknown {
    1 index eq {( checked)print} if
  }{
    dup (025) eq {( checked) print} if (025) /resolution FORM! 
  }ifelse
(>)print
resolnames 1 index cvn getknown {print}{dup print} ifelse(\n) print
pop } forall
(<br><input type="checkbox" name="QC" onChange="document.mapform.submit();")print
/QC FORMknown {( checked)print}if
(> mask all gridpoints in lon, lat and time that have not at least one observation, prior to any analysis\n)print
(<br>
The minimum fraction of days in a season with available data is )print
(<input name=threshold3 onkeypress="changedtext(this)" type=text id=threshold3 value=) print
/threshold3 FORMgetknown {print}{(0.5) dup print /threshold3 FORM!}ifelse
( size=4 maxlength=4/>) print
( for the whole season to be considered in computations) print
</INGRID>
<br>
</font></td></tr>

<tr>
<td align=center width=300 bgcolor=#DCDCDC>
<b><font point-size=12pt>Choose Parameters...</font></b>
</td></tr><tr><td>
<font point-size=10pt>
 <div id="mainContent">
A wet (dry) day is a day with rainfall amount above (below)
<INGRID>
(<input name=threshold1 onkeypress="changedtext(this)" type=text id=threshold1 value=) print
/threshold1 FORMgetknown {print}{(1) dup print /threshold1 FORM!}ifelse
( size=3 maxlength=3/>) print
</INGRID>
mm/day
<br>
A dry (wet) spell is a continuous sequence of at least
<INGRID>
(<input name=threshold2 onkeypress="changedtext(this)" type=text id=threshold2 value=) print
/threshold2 FORMgetknown {print}{(5) dup print /threshold2 FORM!}ifelse
( size=2 maxlength=2/>) print
</INGRID>
dry (wet) days
<s
/td></tr>
<tr>
<td align=center width=300 bgcolor=#DCDCDC>
<b><font point-size=12pt>Choose Quantity:

<INGRID>
%Defining a select menu to choose quantity
/CQ null 4 object
/CQ1 (Total Rainfall) def
/CQ2 (Number of Wet Days) def
/CQ3 (Rainfall Intensity) def
/CQ4 (Number of Dry Spells) def
/CQ5 (Number of Wet Spells) def
/CQf (<em>Percentage of Data Available</em>) def
def
(<select name=jumpMenu3 id=jumpMenu3 onChange="changedtext(this)">) print
[/CQ1 /CQ2 /CQ3 /CQ4 /CQ5 /CQf]
{
  (<option value=) print
  dup cvntos print /jumpMenu3 FORMgetknown { 
    1 index cvntos eq {( selected=selected) print} if
  }{
    dup cvntos (CQ1) eq {( selected=selected) print} if (CQ1) /jumpMenu3 FORM!
  }ifelse
  (>) print CQ 1 index get print (</option>) print
  pop
} forall
(</select>)print
</INGRID>

</font></b>
</td></tr>

<tr>
<td align=center width=300 bgcolor=#DCDCDC>
<b><font point-size=12pt>Compute...</font></b>
</td></tr><tr><td>
<font point-size=10pt>

<INGRID>

%Definition of options

/layernames null 3 object
 /mean (Mean ) def
 /std_dev (Standard Deviation ) def
 /pdf (Probability of exceeding ) def
def

/CQcolorbar null 6 object
/CQ1 ( precip_colors ) def
/CQ2 ( wetday_freq_colors ) def
/CQ3 ( precip_colors ) def
/CQ4 ( wetday_freq_colors ) def
/CQ5 ( wetday_freq_colors ) def
/CQf ( rainbowcolorscale ) def
def

/CQcolorbarStddev null 5 object
/CQ1 ( daily_precip_colors ) def
/CQ2 ( daily_precip_colors ) def
/CQ3 ( daily_precip_colors ) def
/CQ4 ( startcolormap
       0 5 RANGE
       white white
       white 0. VALUE
       DarkGreen DarkGreen 0.5 bandmax
       ForestGreen ForestGreen 1.5 bandmax
       LimeGreen LimeGreen 2.5 bandmax
       yellow yellow 3.5 bandmax
       orange orange 4.5 bandmax
       red red 5 bandmax
       endcolormap) def
/CQ5 ( startcolormap
       0 5 RANGE
       white white
       white 0. VALUE
       DarkGreen DarkGreen 0.5 bandmax
       ForestGreen ForestGreen 1.5 bandmax
       LimeGreen LimeGreen 2.5 bandmax
       yellow yellow 3.5 bandmax
       orange orange 4.5 bandmax
       red red 5 bandmax
       endcolormap) def
/CQf ( rainbowcolorscale ) def
def

/CQrangeMean null 5 object
/CQ1 ( DATA 0 AUTO RANGE ) def
/CQ2 ( DATA 0 AUTO RANGE ) def
/CQ3 [( DATA ) /threshold1 FORMget s== ( 30 RANGE )] concat def
/CQ4 ( DATA 0 12 RANGE ) def
/CQ5 ( DATA 0 12 RANGE ) def
/CQf ( DATA 0 100 RANGE ) def
def

/CQrangeStddev null 5 object
/CQ1 ( DATA 0 600 RANGE ) def
/CQ2 ( DATA 0 30 RANGE ) def
/CQ3 ( DATA 0 20 RANGE ) def
/CQ4 ( DATA 0 5 RANGE ) def
/CQ5 ( DATA 0 5 RANGE ) def
/CQf ( ) def
def

/CQlegend null 5 object
/CQ1 ( (long_name) (Precipitation) def ) def
/CQ2 ( (long_name) (count) def) def
/CQ3 ( (long_name) (Precipitation) def ) def
/CQ4 ( (long_name) (count) def
       (units) (unitless) def) def
/CQ5 ( (long_name) (count) def
       (units) (unitless) def) def
/CQf ( (percent) unitconvert
              (long_name) (Availability) def) def
def

/CQname null 5 object
/CQ1 ( (fullname) (Precipitation) def ) def
/CQ2 ( (fullname) (count) def) def
/CQ3 ( (fullname) (Precipitation) def ) def
/CQ4 ( (fullname) (count) def) def
/CQ5 ( (fullname) (count) def) def
/CQf ( (fullname) (Availability) def) def
def


/CQthreshold4 null 4 object
/CQ1 /threshold41 FORMgetknown {}{( 150 ) dup /threshold41 FORM!}ifelse def
/CQ2 /threshold42 FORMgetknown {}{( 30 ) dup /threshold42 FORM!}ifelse def
/CQ3 /threshold43 FORMgetknown {}{( 10 ) dup /threshold43 FORM!}ifelse def
/CQ4 /threshold44 FORMgetknown {}{( 3 ) dup /threshold44 FORM!}ifelse def
/CQ5 /threshold45 FORMgetknown {}{( 3 ) dup /threshold45 FORM!}ifelse def
/CQf /threshold41 FORMgetknown {}{( 5 ) dup /threshold41 FORM!}ifelse def
def

WWWinfo

%Computation according to Quantity to observe

SOURCES .RIHN .aphrodite [(.V1003R1 .APHRO_MA_) /resolution FORMget (deg)]concat interp
  X 88. 93. RANGEEDGES
  Y 20.5 27. RANGEEDGES
a: .precip
/QC FORMknown {
  :a: .rstn 0. maskle 0. mul :a
  add
}{
  :a
}ifelse

/firstyearspan FORMget /lastyearspan FORMget eq {
  
}{
  T /firstyearspan FORMget /lastyearspan FORMget RANGEEDGES
}ifelse

/jumpMenu3 FORMget (CQ1) eq {
  [/begday FORMget ( ) /jumpMenu FORMget 0 3 getinterval ( - ) /endday FORMget ( ) /jumpMenu2 FORMget 0 3 getinterval] concat
  /threshold3 FORMget interp flexseastotAvgFill
}if
/jumpMenu3 FORMget (CQ2) eq {
  [/begday FORMget ( ) /jumpMenu FORMget 0 3 getinterval ( - ) /endday FORMget ( ) /jumpMenu2 FORMget 0 3 getinterval] concat
  /threshold1 FORMget interp /threshold3 FORMget interp flexseasonalfreqGT
}if
/jumpMenu3 FORMget (CQ3) eq {
  [/begday FORMget ( ) /jumpMenu FORMget 0 3 getinterval ( - ) /endday FORMget ( ) /jumpMenu2 FORMget 0 3 getinterval] concat
  /threshold1 FORMget interp /threshold3 FORMget interp flexseasonalmeandailyvalueGT
}if
/jumpMenu3 FORMget (CQ4) eq {
  [/begday FORMget ( ) /jumpMenu FORMget 0 3 getinterval ( - ) /endday FORMget ( ) /jumpMenu2 FORMget 0 3 getinterval] concat
  /threshold2 FORMget interp /threshold1 FORMget interp /threshold3 FORMget interp flexseasonalnonoverlapDSfreq
}if
/jumpMenu3 FORMget (CQ5) eq {
  [/begday FORMget ( ) /jumpMenu FORMget 0 3 getinterval ( - ) /endday FORMget ( ) /jumpMenu2 FORMget 0 3 getinterval] concat
  /threshold2 FORMget interp /threshold1 FORMget interp /threshold3 FORMget interp flexseasonalnonoverlapWSfreq
}if
/jumpMenu3 FORMget (CQf) eq {
  dataflag
  T [/begday FORMget ( ) /jumpMenu FORMget 0 3 getinterval ( - ) /endday FORMget ( ) /jumpMenu2 FORMget 0 3 getinterval] concat seasonalAverage
}if

/firstyearspan FORMget /lastyearspan FORMget eq {
  T /firstyearspan FORMget VALUE
}{

}ifelse

%Statistical computation options

[(mean) (std_dev) (pdf)] {
  (<input type=radio name=mapsel onChange="changedtext(this)" value=) print
   dup print /mapsel FORMgetknown {
    1 index eq {( checked)print} if
  }{
    dup (mean) eq {( checked) print} if 
  }ifelse
  /jumpMenu3 FORMget (CQf) eq {( disabled="disabled")print (mean) /mapsel FORM!}if
(>)print
layernames 1 index cvn getknown {print}{dup print} ifelse
dup (pdf) eq {
  /jumpMenu3 FORMget (CQ1) eq {
    (<input name=threshold41 onkeypress="changedtext(this)" type=text id=threshold41 value=) print
    /threshold41 FORMgetknown {print}{(150) dup print /threshold41 FORM!}ifelse
    ( size=3 maxlength=3/>mm) print
  }if
  /jumpMenu3 FORMget (CQ2) eq {
    (<input name=threshold42 onkeypress="changedtext(this)" type=text id=threshold42 value=) print
    /threshold42 FORMgetknown {print}{(30) dup print /threshold42 FORM!}ifelse
    ( size=2 maxlength=2/>days) print
  }if
  /jumpMenu3 FORMget (CQ3) eq {
    (<input name=threshold43 onkeypress="changedtext(this)" type=text id=threshold43 value=) print
    /threshold43 FORMgetknown {print}{(10) dup print /threshold43 FORM!}ifelse
    ( size=2 maxlength=2/>mm/day) print
  }if
  /jumpMenu3 FORMget (CQ4) eq {
    (<input name=threshold44 onkeypress="changedtext(this)" type=text id=threshold44 value=) print
    /threshold44 FORMgetknown {print}{(3) dup print /threshold44 FORM!}ifelse
    ( size=2 maxlength=2/>spells) print
  }if
  /jumpMenu3 FORMget (CQ5) eq {
    (<input name=threshold45 onkeypress="changedtext(this)" type=text id=threshold45 value=) print
    /threshold45 FORMgetknown {print}{(3) dup print /threshold45 FORM!}ifelse
    ( size=2 maxlength=2/>spells) print
  }if
} if
(\n) print
pop } forall 
</INGRID>
<br>
</font></td></tr>
<tr>
<td align=center width=300 bgcolor=#DCDCDC>
<b><font point-size=12pt>Apply Analysis to:</font></b>
<INGRID>
(<select name="spatial" id="spatial" onChange="changedtext(this)">) print
[(gridpoint) (Province) (District)] {
  (<option value=) print
  dup print /spatial FORMgetknown { 
    1 index eq {( selected="selected") print} if
  }{ 
    (gridpoint) dup 2 index eq {( selected="selected")print}if /spatial FORM!
  }ifelse
  (>) print print (</option>) print
}forall
(</select>)print

/spatial FORMget (Province) eq {
 SOURCES .Features .Political .World .1st_Order .the_geom
   objectid 1005 1023 1037 1047 2350 VALUES
  [X Y]weighted-average
}if

/spatial FORMget (District) eq {
 SOURCES .Features .Political .World .2nd_Order .the_geom
   gid (1377) (1520) (2380) (2421) (3666) (3773) (4182) (5536) (8040) (8827) (9414) (10752) (11758) (12131) (12389) (12598) (12725) (13145) (13346) (14605) (14649) (14888) (15243) (16670) (17397) (17918) (18858) (18866) (19101) (19345) (19611) (19757) (20714) (20750) (20895) (20913) (21451) (22279) (23369) (23455) (24753) (26667) (27334) (27947) (28857) (29165) (29402) (29801) (30261) (30663) (31786) (31796) (32040) (32150) (32695) (33127) (34243) (34257) (34766) (35270) (35411) (35583) (36883) (37131) VALUES
  [X Y]weighted-average
}if

</INGRID>

  </font></td></tr>
  <tr>
  <td align=center width=300 bgcolor=#DCDCDC>
  <b><font point-size=12pt>near or at: </font></b>

<INGRID>

  ( lon: <input name=mylon onkeypress="changedtext(this)" type=text id=mylon value=) print
onClickforInfo? {
   /map FORMget
     clickpoint 0 get .value s== dup print /mylon FORM!
}{ 
   /map FORMget 
    /mylon FORMgetknown {dup null eq not}{(not known) false}ifelse {
      dup print /mylon FORM!
    }{
      pop ("") print
    }ifelse
}ifelse
  ( size=6 maxlength=6/>&#176;E / lat:
  <input name=mylat onkeypress="changedtext(this)" type=text id=mylat value=) print
onClickforInfo? { 
      clickpoint 1 get .value s== dup print /mylat FORM! 
}{
      /mylat FORMgetknown {dup null eq not}{(not known) false}ifelse {
        dup print /mylat FORM!
      }{
        pop ("") print
      }ifelse
}ifelse
  ( size=6 maxlength=6/>&#176;N) print

/mylon FORMgetknown {null eq not}{false}ifelse {

/spatial FORMgetknown {dup (gridpoint) eq not}{(not known) false}ifelse {

  (Province) eq {

  IRIDB      (select objectid, subnational_geom as geom from boundaries_level1_2002 where contains ) lpar (subnational_geom,GeometryFromText) lpar ('POINT) lpar /mylon FORMget ( ) /mylat FORMget rpar (',4326 ) rpar rpar 13 array astore concat
    openquery
  /shapeinfo WWWinfo !
  1 index objectid 
  WWWinfo .shapeinfo .objectid getrealization VALUE

  CQlegend /jumpMenu3 FORMget get interp

%Writing down the name of the Province

(<br><b>)print
SOURCES .Features .Political .World .1st_Order .admin_name
objectid WWWinfo .shapeinfo .objectid getrealization VALUE
    dup getrealization print
    (</b></td></tr><tr><td>) print

%Plot the time series 
    T fig: line plotlabel :fig
    /framelabel (%=[admin_name] Province) psdef
    figdup
    /map1
    imagelink
(</td></tr><tr><td>download <a href="http://iridl.ldeo.columbia.edu/expert/)print
pop pop pop dup dataseturl print
(/?help+datafiles#GIS">data in graph</a>)print

}{

  IRIDB      (select gid, the_geom as geom from admin2_who where contains ) lpar (the_geom,GeometryFromText) lpar ('POINT) lpar /mylon FORMget ( ) /mylat FORMget rpar (',4326 ) rpar rpar 13 array astore concat
    openquery
  /shapeinfo WWWinfo !
  1 index gid
  WWWinfo .shapeinfo .gid getrealization VALUE

  CQlegend /jumpMenu3 FORMget get interp

%Writing down the name of the District

(<br><b>)print
SOURCES .Features .Political .World .2nd_Order .admin2_name
gid WWWinfo .shapeinfo .gid getrealization VALUE
    dup getrealization print
    (</b></td></tr><tr><td>) print

%Plot the time series
    T fig: line plotlabel :fig
    /framelabel (%=[admin2_name] District) psdef
    figdup
    /map1
    imagelink
(</td></tr><tr><td>download <a href="http://iridl.ldeo.columbia.edu/expert/)print
pop pop pop dup dataseturl print
(/?help+datafiles#GIS">data in graph</a>)print

}ifelse



}{
pop
(</td></tr><tr><td>) print
      1 index
      X /mylon FORMget interp VALUE
      Y /mylat FORMget interp VALUE

%Plot the time series
  CQlegend /jumpMenu3 FORMget get interp
    T fig: line :fig
    figdup
    /map1
    imagelink
(</td></tr><tr><td>download <a href="http://iridl.ldeo.columbia.edu/expert/)print
pop pop dup dataseturl print
(/?help+datafiles#GIS">data in graph</a>)print

}ifelse

}{

(<tr><td><font point-size=12pt color=#FF0000>Click on map on the right or type in lon/lat above to get local information</font>)print

}ifelse

1 index

</INGRID>

</td></tr>
</table>

</td></tr>
<tr><td width=150 align=center>
<a href=""><font color=#861A1A></font></a>
</td></tr>
</table>
</td>
<td align=center valign=top>

<INGRID> 
%Now I actually compute my statistical analysis for the map
/mapsel FORMgetknown {
  dup (mean) eq { pop
    [T]average 
    CQlegend /jumpMenu3 FORMget get interp 
    CQcolorbar /jumpMenu3 FORMget get interp 
    CQrangeMean /jumpMenu3 FORMget get interp 
  }if
  dup (std_dev) eq { pop
    [T]rmsaover
    /lastyearspan FORMget interp /firstyearspan FORMget interp
    sub 1. add dup 1. sub div sqrt mul
    CQlegend /jumpMenu3 FORMget get interp
    CQcolorbarStddev /jumpMenu3 FORMget get interp
    CQrangeStddev /jumpMenu3 FORMget get interp
  }if
  dup (pdf) eq { pop
    DATA 0 300 1 RANGESTEP
    [X Y]integrateddistrib1D
    -1 mul 
    1 add
    aprod
    CQthreshold4 /jumpMenu3 FORMget get interp VALUES
    (percent) unitconvert
    /long_name (Probability) def
    correlationcolorscale
    DATA 0 100 RANGE
  }if
}{
  [T]average
  CQcolorbar /jumpMenu3 FORMget get interp 
  CQrangeMean /jumpMenu3 FORMget get interp
}ifelse 

%Plot the map and colorscale

/mylon FORMgetknown {null eq not}{false}ifelse {
  /spatial FORMgetknown {dup (gridpoint) eq not}{(gridpoint) false}ifelse {
    SOURCES .WORLDBATH .bath
      X 88. 93. RANGEEDGES
      Y 20.5 27. RANGEEDGES
     dup
      0 masklt
      halfgreyscale
    3 -1 roll (Province) eq {
      SOURCES .Features .Political .World .1st_Order .the_geom
        objectid 1005 1023 1037 1047 2350 VALUES
      4 -1 roll
      1 index
      objectid WWWinfo .shapeinfo .objectid getrealization VALUE 
      X Y fig: colors colors || fillby black thin solid states_gaz thinnish countries_gaz blue thin rivers_gaz lakes red stroke :fig 
    }{
      SOURCES .Features .Political .World .2nd_Order .the_geom
       gid (1377) (1520) (2380) (2421) (3666) (3773) (4182) (5536) (8040) (8827) (9414) (10752) (11758) (12131) (12389) (12598) (12725) (13145) (13346) (14605) (14649) (14888) (15243) (16670) (17397) (17918) (18858) (18866) (19101) (19345) (19611) (19757) (20714) (20750) (20895) (20913) (21451) (22279) (23369) (23455) (24753) (26667) (27334) (27947) (28857) (29165) (29402) (29801) (30261) (30663) (31786) (31796) (32040) (32150) (32695) (33127) (34243) (34257) (34766) (35270) (35411) (35583) (36883) (37131) VALUES
      4 -1 roll
      1 index
      gid WWWinfo .shapeinfo .gid getrealization VALUE
      X Y fig: colors colors || fillby black thin solid admin2_gaz thinnish countries_gaz blue thin rivers_gaz lakes red stroke :fig
    }ifelse
/plotaxislength 500 psdef
/antialias true psdef
/fntsze 16 psdef
/map
inputimagelinkwithlimitcontrolsclickforinfo
(<p align=right>)print
figdup 4 {pop} repeat
(download <a href="http://iridl.ldeo.columbia.edu/expert/)print
dup dataseturl print
(/?help+datafiles#GIS">data in map</a>)print
3 {pop} repeat
(<p align=center>)print
figdup 4 {pop} repeat fig- colorscale2g -fig
imagelink 
2 {pop} repeat
  }{ pop
    /mylon FORMget interp /mylat FORMget interp togeopoint .lon
    /mylon FORMget interp /mylat FORMget interp togeopoint .lat
    X Y fig: colors black thin solid states_gaz thinnish countries_gaz blue thin rivers_gaz lakes red pushpins :fig
/plotaxislength 500 psdef
/antialias true psdef
/fntsze 16 psdef
/map
inputimagelinkwithlimitcontrolsclickforinfo
(<p align=right>)print
figdup 5 {pop} repeat
(download <a href="http://iridl.ldeo.columbia.edu/expert/)print
dup dataseturl print
(/?help+datafiles#GIS">data in map</a>)print
(<p align=center>)print
figdup .auxfig
imagelink 
  }ifelse
}{ 
  /spatial FORMgetknown {dup (gridpoint) eq not}{(gridpoint) false}ifelse {
    SOURCES .WORLDBATH .bath
      X 88. 93. RANGEEDGES
      Y 20.5 27. RANGEEDGES
     dup
      0 masklt
      halfgreyscale
    3 -1 roll (Province) eq {
      SOURCES .Features .Political .World .1st_Order .the_geom
        objectid 1005 1023 1037 1047 2350 VALUES
    4 -1 roll
    X Y fig: colors colors || fillby black thin solid states_gaz thinnish countries_gaz blue thin rivers_gaz lakes :fig
    }{
      SOURCES .Features .Political .World .2nd_Order .the_geom
       gid (1377) (1520) (2380) (2421) (3666) (3773) (4182) (5536) (8040) (8827) (9414) (10752) (11758) (12131) (12389) (12598) (12725) (13145) (13346) (14605) (14649) (14888) (15243) (16670) (17397) (17918) (18858) (18866) (19101) (19345) (19611) (19757) (20714) (20750) (20895) (20913) (21451) (22279) (23369) (23455) (24753) (26667) (27334) (27947) (28857) (29165) (29402) (29801) (30261) (30663) (31786) (31796) (32040) (32150) (32695) (33127) (34243) (34257) (34766) (35270) (35411) (35583) (36883) (37131) VALUES
      4 -1 roll
    X Y fig: colors colors || fillby black thin solid admin2_gaz thinnish countries_gaz blue thin rivers_gaz lakes :fig
  }ifelse
/plotaxislength 500 psdef
/antialias true psdef
/fntsze 16 psdef
/map
inputimagelinkwithlimitcontrolsclickforinfo
(<p align=right>)print
figdup 3 {pop} repeat
(download <a href="http://iridl.ldeo.columbia.edu/expert/)print
dup dataseturl print
(/?help+datafiles#GIS">data in map</a>)print
3 {pop} repeat
(<p align=center>)print
figdup
3 {pop} repeat fig- colorscale2g -fig
imagelink
2 {pop} repeat 
  }{ pop 
    X Y fig: colors black thin solid states_gaz thinnish countries_gaz blue thin rivers_gaz lakes :fig
/plotaxislength 500 psdef
/antialias true psdef
/fntsze 16 psdef
/map
inputimagelinkwithlimitcontrolsclickforinfo(<p align=right>)print
figdup 3 {pop} repeat
(download <a href="http://iridl.ldeo.columbia.edu/expert/)print
dup dataseturl print
(/?help+datafiles#GIS">data in map</a>)print
(<p align=center>)print
figdup .auxfig
imagelink
  }ifelse
}ifelse 
</INGRID>
<br>
<INGRID> 
</INGRID>

<p class="indented">

<INGRID>

%Plot the descriptive text below

layernames /mapsel FORMgetknown { get print} {pop (Mean ) print} ifelse
CQ /jumpMenu3 FORMgetknown { get print} {pop (Rainfall Amount) print} ifelse
</INGRID>
in the season defined as (
<INGRID>
/jumpMenu FORMget print
( )print
/begday FORMget print
</INGRID>
-
<INGRID>
/jumpMenu2 FORMget print
( )print
/endday FORMget print
</INGRID>
) over years from
<INGRID>
/firstyearspan FORMget print
</INGRID>
to
<INGRID>
/lastyearspan FORMget print

</INGRID>

</p>
</td>
</tr>
</table>
<input type=hidden name="map.Y.step" value=".5">

<p>
<br>
<table BORDER COLS=1 WIDTH=800 bgcolor="#F5F5F5" NOSAVE >
<tr><td colspan=4 align=center bgcolor=#DCDCDC><b>Maproom Description</b></td></tr>
<tr><td colspan=4>
<font size=-1>
The Maproom explores historical daily precipitation by calculating simple seasonal statistics. Many options can be specified to produce yearly time series of a chosen seasonal diagnostic of the daily precipitation data. The user can then choose to map the mean, standard deviation or probability of exceeding a chosen threshold, over years; clicking on the map will then produce a local yearly time series of the chosen diagnostic. A series of links allow one to download graphs, maps and data files.</font>
<br><p><b>Options:</b>
<br><font size=-1><b>Years and Season</b>:&#160;&#160;
Specify the range of years over which to perform the analysis and choose the start and end dates of the season , over which the diagnostics are to be performed.
<br>
<b>Resolution and Quality Control</b>:&#160;&#160;
Select the spatial resolution of the precipitation data set (either  0.25&#176; or 0.50&#176;) and specify how to handle missing data. The APHRODITE dataset includes a record of the number of station data observations present for each gridbox on each day of the dataset. The maproom allows this information to be used in two ways: (1) gridbox-days without at least one observation can be masked prior to any calculations (checkbox); (2) a minimum fraction of non-masked days per season can be required in order for the seasonal diagnostic to be defined at that gridbox &#8212; if this minimum threshold is not met, then the seasonal diagnostic is assigned a missing value at that gridbox, for that season.
<br>
<b>Daily Parameters</b>:&#160;&#160;
These define the amount in millimeters (non inclusive) above which a day is considered to be a wet day,  and the minimum number (inclusive) of consecutive wet (dry) days to define a wet (dry) spell.
<br><b>Seasonal Diagnostics</b>:&#160;&#160;Choose the seasonal diagnostic quantity (i.e the statistic of the daily data) to be computed for each season, from the following choices.</font>
<br><p><b>Quantities:</b>
<br><font size=-1><b>Total Rainfall</b>:&#160;&#160;total cumulative precipitation (in mm) falling over the season.
<br><b>Number of Wet Days</b>:&#160;&#160;the number of wet days (as defined in the Options section) during the season.
<br><b>Rainfall Intensity</b>:&#160;&#160;
the average daily precipitation over the season considering only wet days.<br>
<b>Number of Wet (Dry) Spells</b>:&#160;&#160;
the number of wet (dry) spells during the season according to the definitions in the Options section. For example, if a wet spell is defined as 5 contiguous wet days, 10 contiguous wet days are counted as 1 wet spell. Note that a spell, according to the definitions above, that is overlapping the start or end of the season will be counted only if the part of the spell that falls within the season reaches the minimal length of consecutive days.
<br>
<b>Percentage of Data Available</b>:&#160;&#160; the percentage of days with non missing values within the season.
<br><b>Spatial Analysis</b>:&#160;&#160;
The analysis is performed at each grid point, but it is then possible to average the results over grid points falling within administrative boundaries.
</font>
 
</td>
</tr>
</table>

<table BORDER COLS=1 WIDTH=800 bgcolor="#F5F5F5" NOSAVE >
<tr><td colspan=4 align=center bgcolor=#DCDCDC><b>Dataset Documentation</b></td></tr>
<tr><td colspan=4>
<b>Datasets:</b><br>
<font size=-1><b>Data</b>:&#160;&#160;RIHN aphrodite V1003R1 Monsoon Asia gridded daily precipitation <a href="http://iridl.ldeo.columbia.edu/SOURCES/.RIHN/.aphrodite/.V1003R1/">here</a>.</font>
<p>
</td>
</tr>

</table>

<table BORDER COLS=1 width=650 bgcolor="#F5F5F5">
<tr>
<td colspan=2 width=50% align=center bgcolor=#DCDCDC><b>Download Map</b></td>
</tr>
<tr>
<INGRID>
showmenu? {
figdup
  imagelinkstart
  (<td align=center>)print
  (Figure as PDF) (.pdf) linktoimageformat
  (</td><td align=center>) print
  (Figure as JPEG) (.jpg) linktoimageformat
   (</td>) print
} if
</INGRID>
</tr>

<tr>
<INGRID>
showmenu? {
pop
/mylon FORMgetknown {null eq not}{false}ifelse {
  /spatial FORMgetknown {(gridpoint) eq not}{false}ifelse { 
    4 {pop} repeat fig- colorscale2g -fig
  }{ 
    .auxfig
  }ifelse
}{
  /spatial FORMgetknown {(gridpoint) eq not}{false}ifelse { 
    3 {pop} repeat fig- colorscale2g -fig 
  }{
    .auxfig
  }ifelse
}ifelse
imagelinkstart
(<td align=center>)print
(Colorscale as PDF) (.pdf) linktoimageformat
(</td><td align=center>) print
(Colorscale as JPEG) (.jpg) linktoimageformat
(</td>) print
pop
} if pop
/spatial FORMgetknown {(gridpoint) eq not}{false}ifelse {pop pop}if
</INGRID>
</tr>
<tr>
<td colspan=2 width=50% align=center bgcolor=#DCDCDC><b>Download Data</b></td>
</tr>
<tr>
<INGRID> 
(<td colspan=2 align=center><a href=http://iridl.ldeo.columbia.edu/expert/)print
/spatial FORMgetknown {dup (gridpoint) eq not}{(gridpoint) false}ifelse {
  (Province) eq {
    home .remic .Features .Political .World .1st_Order .admin_name
        objectid 1005 1023 1037 1047 2350 VALUES
  }{
    SOURCES .Features .Political .World .2nd_Order .admin2_name
       gid (1377) (1520) (2380) (2421) (3666) (3773) (4182) (5536) (8040) (8827) (9414) (10752) (11758) (12131) (12389) (12598) (12725) (13145) (13346) (14605) (14649) (14888) (15243) (16670) (17397) (17918) (18858) (18866) (19101) (19345) (19611) (19757) (20714) (20750) (20895) (20913) (21451) (22279) (23369) (23455) (24753) (26667) (27334) (27947) (28857) (29165) (29402) (29801) (30261) (30663) (31786) (31796) (32040) (32150) (32695) (33127) (34243) (34257) (34766) (35270) (35411) (35583) (36883) (37131) VALUES 
  }ifelse
  use_as_grid
}{
  pop
}ifelse
CQlegend /jumpMenu3 FORMget get interp
CQname /jumpMenu3 FORMget get interp
dup dataseturl print 
</INGRID>/?help+datafiles#GIS">Data in space and time</a><br><font size=-1>that is for given years, season, quantity and spatial organization.</font></td>
</tr>

</table>
</table>
</table>




</tr>
</table>

</center>

<br>
</FORM>

  </body></html>
