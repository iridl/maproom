<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<INGRID>
home .grover .EMILY .Analyses .Locust .CMORPH .dekadsum
  X 90. 155. RANGEEDGES
  Y -12.5 9.5 RANGEEDGES
  T /defaultvalue {last} def pop

%/helpnow FORMknown {(http://ingrid.ldeo.columbia.edu/maproom/.Fire/.Regional/.Indonesia/.Dekadal_Rainfall/instructions.html)redirectto stop} if

%leftmenuinfo:
%{ X Y T} setleftmenugrids
%WWWinfo /map FORMgetknown {.Y .step
%nip
%/map.Y.step
%exch def}
%{pop}ifelse
%[/mask /districts /provinces /countries /coasts] {dup FORMknown {dup (on) def}if pop} forall
%:leftmenuinfo

%onClickforInfo?
%{
%WWWinfo .currenturldir
%(/) rsearch { pop pop} if
%(/) rsearch { pop pop} if
%(/) rsearch { pop pop} if
%(/Local/fireprcp.html) append
%redirecttowithleftmenuinfo
%}if

mimeheader
pop
</INGRID>
<html><head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.75 [en] (X11; U; Linux 2.2.16-3 i686) [Netscape]">
    <title>Indonesia Rainfall Analysis Tool</title>
<INGRID>
mappageLinks
figdefs
</INGRID>

</head>
<body bgcolor="#FFFFFF"  link="#993333" vlink="#993333" alink="#FF0000" onLoad='initdrag();document.mapform.reset();' onunload="window.setTimeout('resetdrag',5000);">
<INGRID>
/leftmenusub? { leftmenulevel 0 get 2 le } def
leftmenuHeader
</INGRID>
<FORM name=mapform action=Dekadal_Rainfall.html>
<INGRID>saveLanguage</INGRID>
<center>
<table border=0>
<tr valign=center>
<td></td>
<td align=center>
<h3><u>Indonesia Rainfall Analysis Tool</u></h3>
<br>
</table>

<table BORDER COLS=1  bordercolor=#808080>
<tr><td align=center bgcolor=#FFFFCC>
<b><font point-size=12pt>Time:</font></b>
<INGRID>
/zetimes home .grover .EMILY .Analyses .Locust .CMORPH .dekadsum
  a: .T
    dup getrealization
     {cvsunits}forall :a: .T getrealization length
                     :a
                     array astore
   exch pop def
(<select name="dekade" id="dekade" onChange="document.mapform.submit();">) print
zetimes {
  (<option value=") print
  dup print (") print /dekade FORMgetknown { 
    1 index eq {( selected="selected") print} if
  }{
    home .grover .EMILY .Analyses .Locust .CMORPH .dekadsum .T dup .last cvsunits exch pop dup 2 index eq {( selected="selected")print}if /dekade FORM!
  }ifelse
  (>) print print (</option>) print
}forall
(</select>)print
</INGRID>
</td>

<td align=center bgcolor=#FFFFCC>
<b><font point-size=12pt>Generate time series spatially averaged over:</font></b>
<INGRID>
(<select name="spatial" id="spatial">) print
[(district) (province)] {
  (<option value=) print
  dup print /spatial FORMgetknown { 
    1 index eq {( selected="selected") print} if
  }{ 
    (district) dup 2 index eq {( selected="selected")print}if /spatial FORM!
  }ifelse
  (>) print print (</option>) print
}forall
(</select>)print
</INGRID>
</td>
</tr>
</table>

<table BORDER COLS=1  bordercolor=#808080>
<tr><td align=center bgcolor=#FFFFCC>
<b><font point-size=12pt>Overlay:</font></b>
<INGRID>
WWWinfo /map FORMknown
[/mask /districts /provinces /countries /coasts] {FORMknown or} forall
nip
{
(<input type=checkbox name=coasts onChange="changedtext(this)") print 
/coasts FORMknown {( checked)print} if
(>Coasts\n)print
(<input type=checkbox name=countries onChange="changedtext(this)") print
/countries FORMknown {( checked)print} if
 (>Countries\n) print
(<input type=checkbox name=provinces onChange="changedtext(this)")print 
/provinces FORMknown {( checked)print} if
(>Provinces\n)print
(<input type=checkbox name=districts onChange="changedtext(this)")print 
/districts FORMknown {( checked)print} if
(>Districts\n)print
}
{
(<input type=checkbox name=coasts>Coasts\n) print
(<input type=checkbox name=countries checked>Countries\n) print
(<input type=checkbox name=provinces checked>Provinces\n) print
(<input type=checkbox name=districts>Districts\n) print
} ifelse
</INGRID>
</td></tr></table>
<table><tr align=center><td>
<INGRID>

[(home .grover .EMILY .Analyses .Locust .CMORPH .dekadsum
  X 90. 155. RANGEEDGES
  Y -12.5 9.5 RANGEEDGES
  T ) lpar /dekade FORMget rpar ( VALUE 

X Y fig: colors
WWWinfo /map FORMknown
[/mask /districts /provinces /countries /coasts] {FORMknown or} forall
nip
{
/districts FORMknown{grey verythin districts_gaz indonesia_dist} if
/provinces FORMknown{
/districts FORMknown {black}{grey}ifelse verythin indonesia_prov} if
/countries FORMknown{black thin countries_gaz} if 
/coasts FORMknown{ black thinnish coasts_gaz} if
}
{
grey verythin indonesia_prov black thin countries_gaz
}ifelse
:fig
/plotaxislength 600 psdef
/antialias true psdef )] concat interp
figdup
/map
showmenu?
{inputimagelinkwithlimitcontrolsclickforinfo}
{imagelink } ifelse
</INGRID>
</td></tr><tr align=center><td>
<INGRID>
figdup .auxfig
imagelink
</INGRID>
</td>
</tr></table>

<INGRID>
onClickforInfo? { 

/onebox {2 index 1 index {.name cvx exec first pointwidth 2 copy sub 3 1 roll add 3 -1 roll pop}forall counttoobject 1 add -1 roll pop {mystream mygrids xlo xhi ylo yhi}inputs mystream mygrids 0 get xlo xhi RANGE
dup 0 replaceNaN exch
 mygrids 1 get ylo yhi RANGE mygrids 0 get xlo xhi definite-integral mygrids 1 get ylo yhi definite-integral
exch dataflag
 mygrids 1 get ylo yhi RANGE mygrids 0 get xlo xhi definite-integral mygrids 1 get ylo yhi definite-integral 
.5      normalize
1output}def

/onebox {2 index 1 index {.name cvx exec first pointwidth 2 copy sub 3 1 roll add 3 -1 roll pop}forall counttoobject 1 add -1 roll pop {mystream mygrids xlo xhi ylo yhi}inputs mystream
mygrids 0 get xlo xhi add 2. div VALUE
 mygrids 1 get ylo yhi add 2. div VALUE
1output}def

home .grover .EMILY .Analyses .Locust .CMORPH .dekadsum /fullname (Estimated Precipitation) def

/spatial FORMgetknown {
  dup (district) eq {
    IRIDB
    (select gid,the_geom as geom,name1,name2,centroid(the_geom) as center,distance(centroid(the_geom),GeometryFromText( 'POINT(YYYY)',4326 )) from indonesia_dist where is_current='true' and the_geom  &&  GeometryFromText( 'POINT(XXXX)',4326 ) ORDER BY distance(centroid(the_geom),GeometryFromText( 'POINT(YYYY)',4326 )) LIMIT 1)
    (XXXX) rsearch pop nip
    clickpoint 0 get .value readunits s== 
    ( )
    clickpoint 1 get .value readunits s==
    3 array astore concat
    exch
    3 array astore concat
    2 {
      (YYYY) rsearch pop nip
      clickpoint 0 get .value readunits s==
      ( )
      clickpoint 1 get .value readunits s==
      3 array astore concat
      exch
      3 array astore concat
    } repeat
    openquery
    /shapeinfo WWWinfo !
    pop
    WWWinfo .shapeinfo .geom [X Y] weighted-average
  }{
    IRIDB
    (select gid,the_geom as geom,name1,centroid(the_geom) as center,distance(centroid(the_geom),GeometryFromText( 'POINT(YYYY)',4326 )) from indonesia1 where  the_geom  &&  GeometryFromText( 'POINT(XXXX)',4326 ) ORDER BY distance(centroid(the_geom),GeometryFromText( 'POINT(YYYY)',4326 )) LIMIT 1)
    (XXXX) rsearch pop nip
    clickpoint 0 get .value readunits s==
    ( )
    clickpoint 1 get .value readunits s==
    3 array astore concat
    exch
    3 array astore concat
    2 {
      (YYYY) rsearch pop nip
      clickpoint 0 get .value readunits s==
      ( )
      clickpoint 1 get .value readunits s==
      3 array astore concat
      exch
      3 array astore concat
    } repeat
    openquery
    /shapeinfo WWWinfo !
    pop
    WWWinfo .shapeinfo .geom [X Y] weighted-average
  } ifelse
}{
  %Y .step /step WWWinfo .FORMinfo .map .Y !
} ifelse

dup /Y known {
  Y /step step def pop
  /mylon clickpoint 0 get .value def
  /mylat clickpoint 1 get .value def 
  X mylon VALUE
  Y mylat VALUE
} if

home .mbell .IRI .MD .maproom .Analyses .CMORPH .Indonesia .avg
X 90 155 RANGEEDGES
Y -12.5 9.5 RANGEEDGES
WWWinfo .shapeinfo .geom [X Y] weighted-average

exch

(<table width="580"><tbody><tr valign="top"><td align="center">
<table cellpadding="4" cellspacing="4" bgcolor="#ffffff"><tbody><tr bgcolor="#f0f0f0"><td>)print

SOURCES .WORLDBATH .bath
WWWinfo .shapeinfo a: .geom :a: .center :a
X Y fig: lightgrey mask grey indonesia_prov black countries_gaz red fill  red geometrysmallpushpins :fig

/plotaxislength 120 psdef /plotborder 0 psdef
/plotbordertop 8 psdef
/plotborderright 8 psdef
/plotborderleft 8 psdef
/plotborderbottom 8 psdef
/antialias true psdef
/map imagelink

(</td><td align="left">
<font face="Helvetical,Arial" point-size=10pt size=-1>
Observations for:<br>
<b>)print

/spatial FORMget (district) eq {
  WWWinfo .shapeinfo
  [ name1 name2 ] {reserverealization} forall
  ()
  [  name2 getrealization   name1 getrealization ]
  { dup (N.A.) eq {pop}{exch print print (, )}ifelse} forall
  pop
  pop
}{
  WWWinfo .shapeinfo
  [ name1 ] {reserverealization} forall
  ()
  [ name1 getrealization ]
  { dup (N.A.) eq {pop}{exch print print (, )}ifelse} forall
  pop
  pop
} ifelse

(</b></font>
</td>
<td>
<font face="Helvetical,Arial" point-size=12pt size=-1 color=red><b>Click on a graph to enlarge it and access display options</b></font>
</td></tr></tbody></table>
<table>

<tr><td bgcolor="#F0F8FF">
<font face="Helvetical,Arial" point-size=9pt size=-1>
<b>a- Dekadal observed vs. long-term average precipitation</b><br>
</font>
</td>
<td bgcolor="#F0F8FF">
<font face="Helvetical,Arial" point-size=9pt size=-1>
<b>b- Multi-year dekadal precipitation comparison</b><br>
</font>
</td>
<td bgcolor="#F0F8FF">
<font face="Helvetical,Arial" point-size=9pt size=-1>
<b>c- 12-month cumulative precipitation</b><br>
</font>
</td></tr>
<tr><td>

<a href="/)print
dup dataseturl
(/DATA/null/null/RANGE//plotlast/200/def//fullname(CMORPH%20precipitation, 2003-present)def/)print
1 index dataseturl
(%5BT%5D2/SM121/T/2/index/.T/a:/.first/cvsunits/:a:/.last/cvsunits/:a/RANGE/T/2/index/.T/replaceGRID//fullname(CMORPH%202003-11%20average)def/2/copy/maskgt/1/index/T/fig:/blue/deltabars/brown/deltabars/|/black/line/grey/line/:fig/figviewer.html?my.help=more+options&map.dekadsum.units=mm&map.dekadsum.plotlast=300&map.domain=+%7B+/dekadsum+0+300+plotrange+/dekadsum+0+300+plotrange+/T+first+last+plotrange+%7D&map.domainparam=+/plotaxislength+250+psdef+/plotborder+72+psdef+/antialias+true+psdef+/XOVY+null+psdef&map.zoom=Zoom&map.dekadsum.plotfirst=0&map.plotaxislength=800&map.antialias=on" OnMouseOver="self.status='Click here to explore the data';return true">

<img src="/)print
dup dataseturl
(/DATA/null/null/RANGE//plotlast/200/def//fullname(CMORPH%20precipitation, 2003-present)def/)print
1 index dataseturl
(%5BT%5D2/SM121/T/2/index/.T/a:/.first/cvsunits/:a:/.last/cvsunits/:a/RANGE/T/2/index/.T/replaceGRID//fullname(CMORPH%202003-11%20average)def/2/copy/maskgt/1/index/T/fig:/blue/deltabars/brown/deltabars/|/black/line/grey/line/:fig/+//dekadsum/0/300/plotrange//dekadsum/0/300/plotrange/T/first/last/plotrange+//plotborder+72+psdef//plotbordertop+20+psdef//plotborderbottom+62+psdef//plotaxislength+250+psdef//antialias+true+psdef//XOVY+null+psdef+.gif" NOSAVE border=0 ALT="Multi-year observed vs. short-term average precipitation" title="Multi-year observed vs. short-term average precipitation" width=322 height=197></a>


</td><td>

<a href="/)print
dup dataseturl
(/T/2/copy//pointwidth/0/def/%286%20Jan%29VALUES/.T/.gridvalues/dup/length/4/sub/get/last/RANGE/T/name/npts/NewIntegerGRID//units/%281/3%20months%20since%2001-Jan%29def//add_offset/0.5/def/replaceGRID/DATA/0/300/RANGE/dup/T/1/108/RANGE/T/0/36/72/shiftdata/T//modulus/36/def/pop/exch/T/-108/shiftGRID/T/1/last/RANGE/T//modulus/36/def/pop//fullname/%282012%29def/exch/a:/T_lag/72/VALUE/T_lag/removeGRID//fullname/%282011%29def/:a:/T_lag/36/VALUE/T_lag/removeGRID//fullname/%282010%29def/:a:/T_lag/0/VALUE/T_lag/removeGRID//fullname/%282009%29def/:a/T/fig:/medium/line/verythin/blue/solid/line/magenta/line/green/line/:fig/figviewer.html?my.help=more+options&map.plotaxislength=800&map.antialias=on" OnMouseOver="self.status='Click here to modify graph';return true">

<img src="/)print
dup dataseturl
(/T/2/copy//pointwidth/0/def/%286%20Jan%29VALUES/.T/.gridvalues/dup/length/4/sub/get/last/RANGE/T/name/npts/NewIntegerGRID//units/%281/3%20months%20since%2001-Jan%29def//add_offset/0.5/def/replaceGRID/DATA/0/300/RANGE/dup/T/1/108/RANGE/T/0/36/72/shiftdata/T//modulus/36/def/pop/exch/T/-108/shiftGRID/T/1/last/RANGE/T//modulus/36/def/pop//fullname/%282012%29def/exch/a:/T_lag/72/VALUE/T_lag/removeGRID//fullname/%282011%29def/:a:/T_lag/36/VALUE/T_lag/removeGRID//fullname/%282010%29def/:a:/T_lag/0/VALUE/T_lag/removeGRID//fullname/%282009%29def/:a/T/fig:/medium/line/verythin/blue/solid/line/magenta/line/green/line/:fig/T/0.5/36.5/plotrange+//plotborder+72+psdef//plotbordertop+15+psdef//plotborderbottom+62+psdef//plotaxislength+250+psdef//antialias+true+psdef//XOVY+null+psdef+.gif" NOSAVE border=0 ALT="Multi-year dekadal precipitation comparison" title="Multi-year dekadal precipitation comparison" width=322 height=197></a>

</td><td>

<a href="/)print
dup dataseturl
(/)print
1 index dataseturl
(/T/2/index/.T/a:/.first/cvsunits/:a:/.last/cvsunits/:a/RANGE/T/2/index/.T/replaceGRID/T/last/365/sub/last/RANGE/T/differential_div/T/integral//fullname/%28Cumulative%20CMORPH%202003-11%20avg%29def/2/1/roll/T/last/365/sub/last/RANGE/T/differential_div/T/integral//fullname/%28Cumulative%20CMORPH%20precipitation%29def/2/1/roll/2/copy/maskgt/1/index/T/fig:/blue/deltabars/brown/deltabars/|/black/medium/line/grey/line/:fig/figviewer.html?my.help=more+options&map.url=&map.domainparam=+/plotaxislength+250+psdef+/plotborder+72+psdef+/antialias+true+psdef+/XOVY+null+psdef&map.zoom=Zoom&map.int_dT.plotfirst=0.0&map.plotaxislenght=800&map.antialias=on" OnMouseOver="self.status='Click here to modify graph';return true">

<img src="/)print
dup dataseturl
(/)print
1 index dataseturl
(/T/2/index/.T/a:/.first/cvsunits/:a:/.last/cvsunits/:a/RANGE/T/2/index/.T/replaceGRID/T/last/365/sub/last/RANGE/T/differential_div/T/integral//fullname/%28Cumulative%20CMORPH%202003-11%20avg%29def/2/1/roll/T/last/365/sub/last/RANGE/T/differential_div/T/integral//fullname/%28Cumulative%20CMORPH%20precipitation%29def/2/1/roll/2/copy/maskgt/1/index/T/fig:/blue/deltabars/brown/deltabars/|/black/medium/line/grey/line/:fig//plotborder+72+psdef//plotbordertop+20+psdef//plotborderbottom+62+psdef//plotaxislength+250+psdef//antialias+true+psdef//XOVY+null+psdef+.gif" NOSAVE border=0 ALT="Cumulative precipitation for most recent 12-month period" title="Cumulative precipitation for most recent 12-month period" width=322 height=197></a>

</td>

</tr>
<tr><td align=center>
<font size=-1><a href="/)print
dup dataseturl
(/DATA/null/null/RANGE//plotlast/200/def/)print
1 index dataseturl
(%5BT%5D2/SM121/T/2/index/.T/a:/.first/cvsunits/:a:/.last/cvsunits/:a/RANGE/T/2/index/.T/replaceGRID//fullname(CMORPH%202003-11%20average)def//long_name/%282003-11%20Average%20Precipitation%29def/T/3/1/roll/3+ncoltable.html?tabopt.N=4&tabopt.1=text&tabopt.2=text&tabopt.3=text&tabopt.4=markNaN&NaNmarker=NaN&tabtype=html&eol=LF+%28unix%29">Data in this graph</a></font>
</td><td></td><td></td></tr>
</table>
<p>
<table border=1>
<tr valign="top"><td colspan="2" bgcolor="#F0F8FF">
<font face="Helvetical,Arial" point-size=12pt size=-1>
<b><u>Description</u></b>
</font>
<font face="Helvetical,Arial" point-size=9pt size=-1>
<br>
a- Dekadal precipitation estimates for 1 Jan 2003 to the present (solid black line) with the addition of the short-term (2003-2011) average precipitation for the same region (grey dotted line).  The blue (red) bars are indicative of precipitation estimates that are above (below) the short-term average.  Note that the short-term average estimated precipitation data have been smoothed.
<p>
b- Dekadal precipitation estimates for the current calendar year (thick black line). Precipitation estimates from previous years are also shown (blue: -1 yr from present; magenta: -2 yrs from present; grey: -3 yrs from present).
<p>
c- Cumulative dekadal precipitation estimates (solid black line) and the cumulative short-term (2003-2011) average precipitation estimates (grey dotted line) for the most recent 12-month period in the selected region.  The blue (red) bars are indicative of estimates that are above (below) the short-term average.  
</font>
<p>
<font face="Helvetical,Arial" point-size=12pt size=-1>
<b><u>Data Sources</u></b>
<br></font>
<font face="Helvetical,Arial" point-size=9pt size=-1>
<b>Precipitation Estimates</b><br>
<font size=-1><b>Data</b>:&nbsp;&nbsp;Daily precipitation estimates, aggregated by dekad (approximately 10 days), on a 0.25 x 0.25 deg. lat/lon grid</font>
<br><font size=-1><b>Data Source</b>:&nbsp; Climate Prediction Center Morphing Technique
(<a href="http://iridl.ldeo.columbia.edu/SOURCES/.NOAA/.NCEP/.CPC/.CMORPH/.daily_calculated/.dataset_documentation.html">CMORPH</a>) </font>
<br><font size=-1><b>Reference</b>:&nbsp; Joyce, R.J., J.E. Janowiak, P. A. Arkin and P. Xie, 2004: CMORPH: A Method that Produces Global Precipitation Estimates from Passive Microwave and Infrared Data at High Spatial and Temporal Resolution. <i>J. Hydrometeorology</i>, <b>5</b>, 487-503.

</font>
<p>
<font size=-1>*The dekadal precipitation estimates have been aggregated from the daily data. Every month has three dekads, such that the first two dekads have 10 days (i.e., 1-10, 11-20), and the third is comprised of the remaining days of the month.  Therefore, the length of the third dekad of each month is not consistent and varies from 8-11 days, depending on the length of the month.</font>
</table>

</table>)print

}if

</INGRID>

</center></FORM></body></html>
