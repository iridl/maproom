<INGRID>
home .mbell .FUNCEME

mimeheader
pop
</INGRID>

<html><head>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
    <title>Brazil Nordeste Climate Monitoring - Historical</title>
    <STYLE TYPE="text/css">
    <!--
    P.indented
       {
       padding-left: 25pt;
       padding-right: 25pt;
       text-align: justify;
       }
    -->
    </STYLE>

<script type="text/javascript">
<!--

//-->
</script>

<INGRID>
figdefs
</INGRID>

</head>
<body bgcolor="#FFFFFF"  link="#993333" vlink="#993333" alink="#FF0000" onLoad='initdrag();document.mapform.reset();' onunload="window.setTimeout('resetdrag',5000);">

<INGRID>
/leftmenusub? { leftmenulevel 0 get 2 le } def
leftmenuHeader
</INGRID>

<FORM name=mapform action=Historical_Precipitation.html>
<table width=100% align="center">
<tr>
<td align=left>
<img src="http://iridl.ldeo.columbia.edu/expert/SOURCES/.WORLDBATH/.bath/X/-30/-85/RANGEEDGES/Y/-30/15/RANGEEDGES/0/mul/1/add/SOURCES/.Features/.Political/.World/.1st_Order/.the_geom/dup/objectid/%281846%29VALUES/X/Y/fig:/blue/mask/lightgrey/fill/red/fill/black/verythin/coasts_gaz/countries_gaz/:fig/++X/-85./-30./plotrange/Y/-30.04167/15.04167/plotrange//plotborder+0+psdef//plotaxislength+75+psdef//XOVY+null+psdef+.jpg">
</td>
<td><h3 align=center><u>Brazil Nordeste Climate Monitoring - Historical</u></h3></td>
<td align=right>
</td> 
</tr>
</table>

<center>
<table border=0 width=90%>
<tr valign=top>
<td align=left>
<table bgcolor="#F5F5F5" bordercolor=#808080>
<tr><td>

<table BORDER COLS=1 width=430 bordercolor=#808080>
<tr>
<td width=300 bgcolor=#DCDCDC>
<b><font point-size=12pt>Span Years between 1973 and 2002 from 

<INGRID>
%Defining an input menu to choose the first year in the range of year spanned
(<input name=firstyearspan onkeypress="changedtext(this)" type=text id=year value=) print
/firstyearspan FORMgetknown {
   print
}{
  (1973) dup print /firstyearspan FORM!
}ifelse
( size=4 maxlength=4/>) print
</INGRID>

       to

<INGRID>
%Defining an input menu to choose the last year in the range of year spanned
(<input name=lastyearspan onkeypress="changedtext(this)" type=text id=endyear value=) print
/lastyearspan FORMgetknown {
  print
}{
  (2002) dup print /lastyearspan FORM!
}ifelse
( size="4" maxlength="4"/>) print
</INGRID>

</font></b>
</td></tr>

<tr>
<td width=300 bgcolor=#DCDCDC>
<b><font point-size=12pt>Define Season from

<INGRID>
%Defining a select menu to choose the first month of the season
(<select name=jumpMenu id=jumpMenu onChange="changedtext(this)">) print
[(January) (February) (March) (April) (May) (June) (July) (August) (September) (October) (November) (December)]
{
  (<option value=) print
  dup print /jumpMenu FORMgetknown {
    1 index eq {( selected=selected) print} if
  }{
    dup (January) eq {( selected=selected) print} if (January) /jumpMenu FORM!
  }ifelse
  (>) print print (</option>) print
} forall
(</select>) print
</INGRID>

        to

<INGRID>
%Defining a select menu to choose the last month of the season
(<select name="jumpMenu2" id="jumpMenu2" onChange="changedtext(this)">) print
[(January) (February) (March) (April) (May) (June) (July) (August) (September) (October) (November) (December)]
{
  (<option value=) print
  dup print /jumpMenu2 FORMgetknown {
    1 index eq {( selected="selected") print} if
  }{
    dup (January) eq {( selected="selected") print} if (January) /jumpMenu2 FORM!
  }ifelse
  (>) print print (</option>) print
} forall
(</select>)print
</INGRID>

</font></b>
</td></tr>

<tr>
<td align=center width=300 bgcolor=#DCDCDC>
<b><font point-size=12pt>Choose Parameters...</font></b>
</td></tr><tr><td>
<font point-size=10pt>
 <div id="mainContent">
A wet (dry) day is a day with rainfall amount above (below)
<INGRID>
(<input name=threshold1 onkeypress="changedtext(this)" type=text id=threshold1 value=) print
/threshold1 FORMgetknown {print}{(1) dup print /threshold1 FORM!}ifelse
( size=3 maxlength=3/>) print
</INGRID>
mm/day
<br>
A dry spell is a continuous sequence of at least
<INGRID>
(<input name=threshold2 onkeypress="changedtext(this)" type=text id=threshold2 value=) print
/threshold2 FORMgetknown {print}{(5) dup print /threshold2 FORM!}ifelse
( size=2 maxlength=2/>) print
</INGRID>
dry days
<br>
The minimum fraction of days in a month with available data is
<INGRID>
(<input name=threshold3 onkeypress="changedtext(this)" type=text id=threshold3 value=) print
/threshold3 FORMgetknown {print}{(0.5) dup print /threshold3 FORM!}ifelse
( size=4 maxlength=4/>) print
</INGRID>
for a whole month to be considered in computations
</td></tr>
<tr>
<td align=center width=300 bgcolor=#DCDCDC>
<b><font point-size=12pt>Choose Quantity:

<INGRID>
%Defining a select menu to choose quantity
/CQ null 4 object
/CQ1 (Daily Rainfall) def
/CQ2 (Number of Wet Days) def
/CQ3 (Rainfall Intensity) def
/CQ4 (Number of Dry Spells) def
/CQf (<em>Percentage of Data Available</em>) def
def
(<select name=jumpMenu3 id=jumpMenu3 onChange="changedtext(this)">) print
[/CQ1 /CQ2 /CQ3 /CQ4 /CQf]
{
  (<option value=) print
  dup print dup cvntos print /jumpMenu3 FORMgetknown {
    1 index cvntos eq {( selected=selected) print} if
  }{
    dup cvntos (CQ1) eq {( selected=selected) print} if (CQ1) /jumpMenu3 FORM!
  }ifelse
  (>) print CQ 1 index get print (</option>) print
pop} forall
(</select>)print
</INGRID>

</font></b>
</td></tr>

<tr>
<td align=center width=300 bgcolor=#DCDCDC>
<b><font point-size=12pt>Compute...</font></b>
</td></tr><tr><td>
<font point-size=10pt>

<INGRID>

%Define the objects and the input menu that will eventually create the command producing the map according to all options

WWWinfo 

/environment [(home .mbell .FUNCEME
  ds: SOURCES .WORLDBATH .bath
  X -37.5 -42 RANGEEDGES
  Y -8 -2.5 RANGEEDGES
  0 mul
  1 add
  SOURCES .Features .Political .World .Countries .the_geom
    SOURCES .FUNCEME .Nordeste .daily .station
     lon
      DATA -42 -37.5 RANGE
      lat
       DATA -8 -2.5 RANGE
       PCPN
        T ) lpar /firstyearspan FORMget (-) /lastyearspan FORMget rpar ( VALUES ) ] concat def

/CQfonction null 5 object
/CQ1 [environment lpar /jumpMenu FORMget 0 3 getinterval (-) /jumpMenu2 FORMget 0 3 getinterval rpar ( -1 ) /threshold3 FORMget ( seasonalmeandailyvalueGT) ] concat def
/CQ2 [environment lpar /jumpMenu FORMget 0 3 getinterval (-) /jumpMenu2 FORMget 0 3 getinterval rpar ( ) /threshold1 FORMget ( ) /threshold3 FORMget ( seasonalfreqGT ) ] concat def
/CQ3 [environment lpar /jumpMenu FORMget 0 3 getinterval (-) /jumpMenu2 FORMget 0 3 getinterval rpar ( ) /threshold1 FORMget ( ) /threshold3 FORMget ( seasonalmeandailyvalueGT ) ] concat def
/CQ4 [environment lpar /jumpMenu FORMget 0 3 getinterval (-) /jumpMenu2 FORMget 0 3 getinterval rpar ( ) /threshold2 FORMget ( ) /threshold1 FORMget ( ) /threshold3 FORMget ( seasonalnonoverlapDSfreq )] concat def
/CQf [environment ( T ) lpar /jumpMenu FORMget 0 3 getinterval (-) /jumpMenu2 FORMget 0 3 getinterval rpar ( VALUES dataflag )] concat def
def

/CQcolorbar null 5 object
/CQ1 ( precip_colors ) def
/CQ2 ( wetday_freq_colors ) def
/CQ3 ( precip_colors ) def
/CQ4 ( wetday_freq_colors ) def
/CQf ( rainbowcolorscale ) def
def

/CQcolorbarStddev null 5 object
/CQ1 ( daily_precip_colors ) def
/CQ2 ( daily_precip_colors ) def
/CQ3 ( daily_precip_colors ) def
/CQ4 ( startcolormap
       0 5 RANGE
       white white
       white 0. VALUE
       DarkGreen DarkGreen 0.5 bandmax
       ForestGreen ForestGreen 1.5 bandmax
       LimeGreen LimeGreen 2.5 bandmax
       yellow yellow 3.5 bandmax
       orange orange 4.5 bandmax
       red red 5 bandmax
       endcolormap) def
/CQf ( rainbowcolorscale ) def
def

/CQrangeMean null 5 object
/CQ1 ( DATA 0 8 RANGE ) def
/CQ2 ( ) def
/CQ3 [( DATA ) /threshold1 FORMget s== ( 30 RANGE )] concat def
/CQ4 ( DATA 0 12 RANGE ) def
/CQf ( DATA 0 100 RANGE ) def
def

/CQrangeStddev null 5 object
/CQ1 ( DATA 0 20 RANGE ) def
/CQ2 ( DATA 0 30 RANGE ) def
/CQ3 ( DATA 0 20 RANGE ) def
/CQ4 ( DATA 0 5 RANGE ) def
/CQf ( ) def
def

/CQlegend null 5 object
/CQ1 ( (long_name) (Precipitation) def ) def
/CQ2 ( ) def
/CQ3 ( (long_name) (Precipitation) def ) def
/CQ4 ( (long_name) (count) def) def
/CQf ( (percent) unitconvert
              (long_name) (Availability) def) def
def

/CQthreshold4 null 4 object
/CQ1 /threshold41 FORMgetknown {}{( 5 ) dup /threshold41 FORM!}ifelse def
/CQ2 /threshold42 FORMgetknown {}{( 30 ) dup /threshold42 FORM!}ifelse def
/CQ3 /threshold43 FORMgetknown {}{( 10 ) dup /threshold43 FORM!}ifelse def
/CQ4 /threshold44 FORMgetknown {}{( 3 ) dup /threshold44 FORM!}ifelse def
/CQf /threshold41 FORMgetknown {}{( 5 ) dup /threshold41 FORM!}ifelse def
def

onClickforInfo?
{/map FORMget

/mylon clickpoint 0 get .value s== def

/mylat clickpoint 1 get .value s== def

/thepin ( red pushpins ) def

/thepinfct [( -a- lon ) mylon ( sub dup mul
lat ) mylat ( sub dup mul add -1 mul
       [STNID]sort_by
       rank (1) VALUES
     a: .lon
      :a: .lat :a )] concat def

/localplot [CQfonction /jumpMenu3 FORMget get ( (name) (tsPCPN) def :ds
lon ) mylon ( sub dup mul
lat ) mylat ( sub dup mul add -1 mul
[STNID] sort_by rank (1) VALUES
tsPCPN station .Name
lon lat T fig: line plotlabel plotlabel plotlabel :fig
(framelabel) (Station at (%=[lon], %=[lat]) %=[Name]) psdef )] concat def

/localname [(SOURCES .FUNCEME .Nordeste .daily .station
lon ) mylon ( sub dup mul
lat ) mylat ( sub dup mul add -1 mul
[STNID] sort_by rank (1) VALUES .Name )] concat def
}
{
/thepin ( ) def
/thepinfct ( ) def
}ifelse


/layerlist null 5 object

/mean
[CQfonction /jumpMenu3 FORMget get
( (name) (myPCPN) def
 [T]average )
CQlegend /jumpMenu3 FORMget get
(        :ds
  a- .bath
    -a- .the_geom )
thepinfct
(     -a- .lon
         -a- .lat
       -a- .myPCPN -a )
       CQcolorbar /jumpMenu3 FORMget get 
       CQrangeMean /jumpMenu3 FORMget get ] concat def

/std_dev
[CQfonction /jumpMenu3 FORMget get
( (name) (myPCPN) def
 [T]rmsaover )
CQlegend /jumpMenu3 FORMget get
(        :ds
  a- .bath
    -a- .the_geom )
thepinfct
(     -a- .lon
          -a- .lat
       -a- .myPCPN -a )
       CQcolorbarStddev /jumpMenu3 FORMget get
       CQrangeStddev /jumpMenu3 FORMget get ] concat def

/pdf
[CQfonction /jumpMenu3 FORMget get
( DATA 0 100 1 RANGESTEP
[STNID]integrateddistrib1D
           (name) (myPCPN) def
           -1 mul
           1 add
           aprod ) lpar CQthreshold4 /jumpMenu3 FORMget get rpar ( VALUES
             (percent) unitconvert
             (long_name) (Probability) def
         :ds
  a- .bath
    -a- .the_geom )
thepinfct
(     -a- .lon
          -a- .lat
       -a- .myPCPN -a
       DATA 0 100 RANGE ) ] concat def

/defaultlayer currentobject /mean get def
 def 

/layercb null 4 object
/mean [layerlist /mean get ( fig: scattercolor :fig .auxfig)] concat def
/std_dev [layerlist /std_dev get ( fig: scattercolor :fig .auxfig)] concat def
/pdf [layerlist /pdf get ( fig: scattercolor :fig .auxfig)] concat def
/defaultlayer currentobject /mean get def
def

/layernames null 4 object
 /mean (Mean ) def
 /std_dev (Standard Deviation ) def
 /pdf (Probability of exceeding ) def
def

/descprintcondition {stopprint /mapsel FORMgetknown {cvn eq} {pop false} ifelse {startprint} if} def 

[/mean /std_dev /pdf] 

{
(<input type=radio name=mapsel onChange="changedtext(this)" value=) print
dup cvntos print /mapsel FORMgetknown {
  cvn 1 index eq {( checked)print} if
}{
   dup /mean eq {( checked) print} if
}ifelse
/jumpMenu3 FORMget (CQf) eq {( disabled="disabled")print /mean /mapsel FORM!}if
(>)print 
layernames 1 index getknown {print}{dup cvntos print} ifelse
dup /pdf eq {
  /jumpMenu3 FORMget (CQ1) eq {
    (<input name=threshold41 onkeypress="changedtext(this)" type=text id=threshold41 value=) print
    /threshold41 FORMgetknown {print}{(5) dup print /threshold41 FORM!}ifelse
    ( size=2 maxlength=2/>mm/day) print
  }if
  /jumpMenu3 FORMget (CQ2) eq {
    (<input name=threshold42 onkeypress="changedtext(this)" type=text id=threshold42 value=) print
    /threshold42 FORMgetknown {print}{(30) dup print /threshold42 FORM!}ifelse
    ( size=2 maxlength=2/>days) print
  }if
  /jumpMenu3 FORMget (CQ3) eq {
    (<input name=threshold43 onkeypress="changedtext(this)" type=text id=threshold43 value=) print
    /threshold43 FORMgetknown {print}{(10) dup print /threshold43 FORM!}ifelse
    ( size=2 maxlength=2/>mm/day) print
  }if
  /jumpMenu3 FORMget (CQ4) eq {
    (<input name=threshold44 onkeypress="changedtext(this)" type=text id=threshold44 value=) print
    /threshold44 FORMgetknown {print}{(3) dup print /threshold44 FORM!}ifelse
    ( size=2 maxlength=2/>spells) print
  }if
} if
(\n) print
pop } forall
</INGRID>
<br>
<INGRID>
%Plot local information
WWWinfo
onClickforInfo?
{
(</font></td></tr>
<tr>
<td align=center width=300 bgcolor=#DCDCDC>
<b><font point-size=12pt>Local Time Series: ) print localname interp getrealization print
(</font></b>
</td></tr><tr><td>) print
localplot interp
/map
localplot
imagelink
}if
</INGRID>

</td></tr>
</table>

<INGRID>
startprint
</INGRID>

</td></tr>
<tr><td width=150 align=center>
<a href=""><font color=#861A1A></font></a>
</td></tr>
</table>
</td>
<td align=center valign=top>

<INGRID>


%Plot map
WWWinfo 
/mapsel FORMgetknown not { /defaultlayer } if
layerlist exch getknown {
  [( X Y fig: blue mask lightgrey fill black thin solid states_gaz blue verythin rivers_gaz streams ) thepin ( scattercolor :fig
   (plotaxislength) 500 psdef
   (antialias) true psdef
   (fntsze) 16 psdef )
  ] concat
  2 array astore concat
  interp
}{
  layerlist /defaultlayer get
  [( X Y fig: blue mask lightgrey fill black thin solid states_gaz blue verythin rivers_gaz streams ) thepin ( scattercolor :fig
   (plotaxislength) 500 psdef
   (antialias) true psdef
   (fntsze) 16 psdef )
  ] concat
  2 array astore concat 
  interp
} ifelse

/map
/mapsel FORMgetknown not { /defaultlayer } if
layerlist exch getknown {
  [( X Y fig: blue mask lightgrey fill black thin solid states_gaz blue verythin rivers_gaz streams ) thepin ( scattercolor :fig
   (plotaxislength) 500 psdef
   (antialias) true psdef
   (fntsze) 16 psdef )
  ] concat
  2 array astore concat
}{
  layerlist /defaultlayer get
  [( X Y fig: blue mask lightgrey fill black thin solid states_gaz blue verythin rivers_gaz streams ) thepin ( scattercolor :fig
   (plotaxislength) 500 psdef
   (antialias) true psdef
   (fntsze) 16 psdef )
  ] concat
  2 array astore concat
} ifelse
inputimagelinkwithlimitcontrolsclickforinfo
</INGRID>

<br>

<INGRID>
%Plot colorbar
WWWinfo
/mapsel FORMgetknown not { /defaultlayer } if
layercb exch getknown {interp}
{layercb /defaultlayer get interp} ifelse
/fntsze 12 psdef
/map
/mapsel FORMgetknown not { /defaultlayer } if
layercb exch getknown {}
{layercb /defaultlayer get} ifelse
imagelink
</INGRID>

<p class="indented">

<INGRID>
layernames /mapsel FORMgetknown { get cvntos print} {pop (Mean ) print} ifelse
CQ /jumpMenu3 FORMgetknown { get cvntos print} {pop (Rainfall Amount) print} ifelse
</INGRID>
in the season defined as (
<INGRID>
/jumpMenu FORMgetknown {print}{pop (January) print}ifelse
</INGRID>
-
<INGRID>
/jumpMenu2 FORMgetknown {print}{pop (January) print}ifelse
</INGRID>
) over years from
<INGRID>
/firstyearspan FORMgetknown {print}{pop (1951) print}ifelse
</INGRID>
to
<INGRID>
/lastyearspan FORMgetknown {print}{pop (2004) print}ifelse
</INGRID>

</p>
</td>
</tr>
</table>
<input type=hidden name="map.Y.step" value=".5">

<p>
<br>

<table BORDER COLS=1 WIDTH=800 bgcolor="#F5F5F5" NOSAVE >
<tr><td colspan=4 align=center bgcolor=#DCDCDC><b>Dataset Documentation</b></td></tr>
<tr><td colspan=4>
<b>Datasets:</b><br>
<font size=-1><b>Data</b>:&nbsp;&nbsp;Nordeste daily station Precipitation from <a href="http://iridl.ldeo.columbia.edu/SOURCES/.FUNCEME/.Nordeste/.daily/.station/">FUNCEME</a>: Fundação Cearense de Meteorologia e Recursos Hídricos.</font>
<p>
</td>
</tr>


</table>

<table BORDER COLS=1 width=650 bgcolor="#F5F5F5">
<tr>
<td colspan=2 width=50% align=center bgcolor=#DCDCDC><b>Download Map</b></td>
<!--<td align=center bgcolor=#DCDCDC><b>Download Data</b></td></tr>-->
</tr><tr>
<INGRID>
onClickforInfo? {
pop pop pop pop pop pop pop
}{
pop pop pop pop pop
}ifelse
 figdup showmenu? {
  imagelinkstart
  (<td align=center>)print
  (Figure as PDF) (.pdf) linktoimageformat
  (</td><td align=center>) print
  (Figure as JPEG) (.jpg) linktoimageformat
   (</td>) print
} if

%(<td rowspan=2 align=center><a href=http://iridl.ldeo.columbia.edu/expert/)print
%pop 3 index dup dataseturl print 
</INGRID>
<!--?help+datafiles#GIS">Data for GIS</a><font color=green>(restricted)</font></td>-->
</tr>
<tr>
<INGRID>
pop showmenu? {
/mapsel FORMgetknown not { /defaultlayer } if
layercb exch getknown {interp}
{layercb /defaultlayer get interp} ifelse
/fntsze 12 psdef
/map
/mapsel FORMgetknown not { /defaultlayer } if
layercb exch getknown {}
{layercb /defaultlayer get} ifelse

imagelinkstart
(<td align=center>)print
(Colorscale as PDF) (.pdf) linktoimageformat
(</td><td align=center>) print
(Colorscale as JPEG) (.jpg) linktoimageformat
(</td>) print
pop
} if pop
</INGRID>
</tr>
</table>

</center>

<br>

<INGRID>

startprint
</INGRID>
</FORM>

  </body></html>

























